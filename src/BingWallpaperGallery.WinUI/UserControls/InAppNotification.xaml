<?xml version="1.0" encoding="utf-8" ?>
<UserControl
    x:Class="BingWallpaperGallery.WinUI.UserControls.InAppNotification"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animations="using:CommunityToolkit.WinUI.Animations"
    xmlns:behaviors="using:CommunityToolkit.WinUI.Behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:local="using:BingWallpaperGallery.WinUI.UserControls"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">
    <UserControl.Resources>
        <animations:AnimationSet x:Key="ShowAnimations">
            <animations:TranslationAnimation
                EasingMode="EaseOut"
                From="0,200,0"
                To="0"
                Duration="0:0:0.3" />
            <animations:OpacityAnimation
                EasingMode="EaseOut"
                From="0"
                To="1.0"
                Duration="0:0:0.3" />
        </animations:AnimationSet>
        <animations:AnimationSet x:Key="HideAnimations">
            <animations:OpacityAnimation
                EasingMode="EaseOut"
                From="1.0"
                To="0"
                Duration="0:0:0.3" />
            <animations:OpacityAnimation
                EasingMode="EaseOut"
                From="1.0"
                To="0"
                Duration="0:0:0.3" />
        </animations:AnimationSet>
    </UserControl.Resources>

    <InfoBar
        x:Name="NotificationInfoBar"
        Width="320"
        IsClosable="True"
        IsIconVisible="True"
        IsOpen="False">
        <i:Interaction.Behaviors>
            <behaviors:StackedNotificationsBehavior x:Name="StackedNotifications" />
            <i:DataTriggerBehavior
                Binding="{Binding IsOpen, ElementName=NotificationInfoBar}"
                ComparisonCondition="Equal"
                Value="True">
                <behaviors:StartAnimationAction Animation="{StaticResource ShowAnimations}" />
            </i:DataTriggerBehavior>
            <i:DataTriggerBehavior
                Binding="{Binding IsOpen, ElementName=NotificationInfoBar}"
                ComparisonCondition="Equal"
                Value="False">
                <behaviors:StartAnimationAction Animation="{StaticResource HideAnimations}" />
            </i:DataTriggerBehavior>
        </i:Interaction.Behaviors>
    </InfoBar>
</UserControl>
